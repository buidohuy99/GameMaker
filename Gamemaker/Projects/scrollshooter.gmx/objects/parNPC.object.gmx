<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>10</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init
image_speed=0.16;
showText=false;
showText2=false;

pid=-1;

alarm[0]=1;//load

dialougeSprite=-1; //the image of the NPC
dialougeSpritePERM=-1;
dialougeTalk=0; //toggle b/w 1,0 for talking effect
dialougeTextOn=0; //type-writer effect
name="";
namePERM="";

//setup the vars to hold the NPC lines
on0=0;
on1=0;
for(i=0;i&lt;255;i++){
    for(a=0;a&lt;50;a++){
        line[i,a]="";//text
        op0[i,a]=-1;//ds_list--options
        op1[i,a]=-1;//ds_list
    }
}

//checkList-- for jumping dialogue trees
checkAmount=0
for(i=0;i&lt;100;i++){
    checkQuest[i]=-1;
    checkON[i]=-1;
    checkText0[i]=-1;
    checkText1[i]=-1;
}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///LOAD

if pid=-1{
    show_debug_message("NPC Creation Failed!");
    instance_destroy();
    exit;
}

if load_npcChat(pid)=1{
    show_debug_message("Loaded NPC: "+string(pid));
}else{
    show_debug_message("Failed to load NPC: "+string(pid));
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collisions

if showText2=true{
    global.dialogue=true;
    if place_meeting(x,y,oj_maybay){
        showText=true
    }else{
        showText=false
    }
}else{
    showText=false
    if keyboard_check_released(vk_space)
        &amp;&amp; place_meeting(x,y,oj_maybay){
            showText2=true
        }
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///textBox

//draw the TextBox
if showText=true{
    var xx,yy,ww,hh;
    
    var padding=20;
    //maxlength=view_wview[0];
    //spd =argument1;
    //text=argument0;
    font = font_interact;
    //text_length=string_length(text);
    font_size=font_get_size(font);
    //draw_set_font(font);
    //ww=string_width_ext(str,,maxlength);
    //hh=string_height_ext(str,font_size+(font_size/2),maxlength);
    //boxwidth=text_width+(padding*2);
    //boxheight=text_height+(padding*2);
    ww=350+32
     xx=(view_wview[0]-ww)/2
    var newyy=string_height_ext(line[on0,on1],font_size*1.5,ww-100-padding);
    if ds_exists(op0[on0,on1],ds_type_list) &amp;&amp; ds_list_size(op0[on0,on1])&gt;0{
        var yyy=padding*2+newyy;
    for(i=0;i&lt;ds_list_size(op0[on0,on1]);i++){
    hh=yyy+20*i+padding}}else {
    if newyy+padding*3&lt;(padding+11+1.5*sprite_get_height(dialougeSprite)+string_height(name)){
    hh=padding+11+1.5*sprite_get_height(dialougeSprite)+string_height(name);
    }
    else{
    hh=newyy+padding*3}
    
    } ;
    yy=(global.gui_height-hh)/2 
     
     
    
    
    //Fancy outlines
    draw_set_alpha(1)
    draw_set_font(font_interact)
    //Draw Background
    draw_sprite_stretched_ext(sp_window_base,0,xx+4,yy+4,ww-8,hh-8,c_white,0.7)
    //draw_self()
    //Draw Edges
    draw_sprite_stretched(sp_window_top,0,xx+16,yy,ww-32,16)
    draw_sprite_stretched(sp_window_bottom,0,xx+16,yy+hh-16,ww-32,16)
    draw_sprite_stretched(sp_window_ml,0,xx,yy+16,16,hh-32)
    draw_sprite_stretched(sp_window_mr,0,xx+ww-16,yy+16,16,hh-32)
    //Draw Corners
    draw_sprite(sp_window_tl,0,xx,yy)
    draw_sprite(sp_window_tr,0,xx+ww-16,yy)
    draw_sprite(sp_window_bl,0,xx,yy+hh-16)
    draw_sprite(sp_window_br,0,xx+ww-16,yy+hh-16) 
    
    //draw_set_alpha(0.8)
    //draw_set_color(c_dkgray)
    //draw_rectangle(xx,yy,xx+ww,yy+hh,false)
    //draw_set_alpha(1)
    //draw_set_color(c_black)
    //draw_rectangle(xx,yy,xx+ww,yy+hh,true)
    
    
    //Draw the Face
    if dialougeSprite!=-1 &amp;&amp; sprite_exists(dialougeSprite){
        draw_sprite_stretched(dialougeSprite,-1,xx+((100-sprite_get_width(dialougeSprite))/2),yy+(sprite_get_height(dialougeSprite)/2),sprite_get_width(dialougeSprite),sprite_get_height(dialougeSprite))
    }else{
        draw_sprite_stretched(sp_chat,0,xx+10,yy+(hh/2)-(16),32,32)
    }
    
    //Draw the Name
    draw_set_halign(fa_center)
    draw_set_color(c_black)
    draw_text(xx+50+1,yy+1.5*sprite_get_height(dialougeSprite)+11,name)
    draw_set_color(c_white)
    draw_text(xx+50,yy+1.5*sprite_get_height(dialougeSprite)+10,name)
    
    xx+=1 ww-=1
    
    
    //Draw the Main Line
    var p=string_pos("|",line[on0,on1]);//get rid of the commands
    draw_set_halign(fa_left)
    draw_set_color( c_black );
    
    
    var str="";
    if p=0{
        str=line[on0,on1]
    }else{
        str=string_copy(line[on0,on1],1,p-1)
    }
    
    //typewriter effect
    if dialougeTextOn&lt;string_length(str){
        dialougeTextOn++
        if dialougeTextOn%3==0{
            dialougeTalk=!dialougeTalk
        }
        
    }else{dialougeTalk=0}
    str=string_copy(str,1,dialougeTextOn)
    newyy=string_height_ext(line[on0,on1],font_size*1.5,ww-100-padding);
    draw_text_ext(xx+100+1,yy+newyy,str,font_size*1.5,ww-100-padding)
    draw_set_color( c_white );
    draw_text_ext(xx+100,yy+newyy,str,font_size*1.5,ww-100-padding)
    
    
    //draw options
    if ds_exists(op0[on0,on1],ds_type_list) &amp;&amp; ds_list_size(op0[on0,on1])&gt;0{
        var _yy=yy+newyy+padding*2;
        
        for(i=0;i&lt;ds_list_size(op0[on0,on1]);i++){
            if !scr_GUIhover(xx+5,_yy,xx+ww-5,_yy+19){
                draw_text_shadow_color(xx+100,_yy,
                ds_list_find_value(op0[on0,on1],i),merge_color(c_blue,c_aqua,0.5))
            }else{
                if mouse_check_button(mb_left){
                    draw_text_shadow_color(xx+100,_yy,ds_list_find_value(op0[on0,on1],i),c_white)
                }else{
                    draw_text_shadow_color(xx+100,_yy,ds_list_find_value(op0[on0,on1],i),c_ltgray)
                }
                
                if mouse_check_button_released(mb_left){
                    scrNPCCDialogOption(i)
                    dialougeTextOn=0
                    break;
                }
            }
            _yy+=20
        }
        
    }else{
        //draw the Continue button
        if !scr_GUIhover(xx+5,yy+hh-25,xx+ww-5,yy+hh){
            draw_text_shadow_color(xx+(ww/2),yy+hh-20,"Click here to continue",merge_color(c_blue,c_aqua,0.5))
        }else{
            if mouse_check_button(mb_left){
                draw_text_shadow_color(xx+(ww/2),yy+hh-20,"Click here to continue",c_white)
            }else{
                draw_text_shadow_color(xx+(ww/2),yy+hh-20,"Click here to continue",c_ltgray)
            }
            if mouse_check_button_released(mb_left){
                if dialougeTextOn&lt;string_length(str){
                    dialougeTextOn=string_length(str)
                }else{
                    scrNPCDialogContinue()
                    dialougeTextOn=0
                }
            }
        }
    }
    
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
//name
draw_set_colour(c_black);
length=string_length(name);
height=string_height(name);
draw_rectangle(x-(length/2),y+sprite_get_height(sprite_index)/2,x-(length/2)+length,y+(sprite_get_height(sprite_index)/2)+height,false);
draw_set_colour(c_yellow);
draw_set_font(font7);
draw_text(x-length/2,y+sprite_get_height(sprite_index)/2,name);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
